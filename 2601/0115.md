# 260115 TIL

## 컨텍스트 스위칭 시에는 어떤 일들이 일어나나요?

### 과정
1. **현재 상태 저장 :** 실행 중인 프로세스의 프로그램 카운터, 레지스터 값 등 현재의 문맥 정보를 해당 프로세스 제어 블록에 기록
2. **커널 모드 전환 :** 인터럽트나 시스템 콜에 의해 제어권이 운영체제 커널로 넘어감
3. **다음 프로세스 선택 :** 스케줄러가 준비 큐에서 다음에 실행할 프로세스 선정
4. **상태 복원 :** 선택된 프로세스의 프로세스 제어 블록에서 이전 상태 정보를 읽어 CPU 레지스터에 적재
5. **사용자 모드 복귀 :** 복원된 프로그램 카운터 지점부터 실행 재개



---

## 프로세스와 스레드는 컨텍스트 스위칭이 발생했을 때 어떤 차이가 있을까요?

### 주요 차이점
* **자원 공유 여부 :** 프로세스 교환 시에는 가상 메모리 주소 공간 자체가 바뀌어야 하므로 주소 변환 참조 버퍼(TLB)를 비워야 함. 이는 상당한 성능 저하를 유발함.
* **오버헤드 크기 :** 스레드 교환은 프로세스 내의 데이터, 코드, 힙 영역을 공유하므로 주소 공간을 바꿀 필요가 없음. 단순히 레지스터와 스택 포인터만 교체하면 되므로 프로세스 교환보다 훨씬 빠름.

---

## 컨텍스트 스위칭이 발생할 때, 기존의 프로세스 정보는 커널스택에 어떠한 형식으로 저장되나요?

### 저장 형식
문맥 정보는 프로세스 제어 블록에 저장되기도 하지만, 인터럽트 발생 시점의 하드웨어 상태는 해당 프로세스의 커널 스택에 **트랩 프레임**이라 불리는 구조체 형식으로 저장됨. 여기에는 세그먼트 셀렉터, 범용 레지스터, 플래그 레지스터, 명령어 포인터 등의 정보가 순차적으로 쌓임.

---

## 컨텍스트 스위칭은 언제 일어날까요?

### 발생 시점
1. **할당 시간 종료 :** 라운드 로빈 스케줄링 등에서 정해진 시간 할당량을 모두 소비했을 때 발생
2. **입출력 요청 :** 프로세스가 입출력 작업을 시작하여 대기 상태로 전환될 때 발생
3. **인터럽트 발생 :** 하드웨어 장치로부터 신호가 오거나 예외 상황이 발생하여 처리가 필요할 때 발생
4. **우선순위 변경 :** 더 높은 우선순위를 가진 프로세스가 등장하여 현재 프로세스를 선점할 때 발생

---

## 프로세스 스케줄링 알고리즘에는 어떤 것들이 있나요?

### 주요 알고리즘
* **선입 선처리 :** 도착한 순서대로 처리하는 비선점 방식
* **최단 작업 우선 :** 실행 시간이 가장 짧은 프로세스를 먼저 처리
* **라운드 로빈 :** 각 프로세스에 동일한 시간 할당량을 부여하고 순환하며 처리하는 선점 방식
* **우선순위 스케줄링 :** 프로세스마다 부여된 우선순위에 따라 처리
* **다단계 피드백 큐 :** 여러 개의 큐를 두고 프로세스의 특성에 따라 큐 사이를 이동시키며 스케줄링

---

## RR을 사용할 때, Time Slice에 따른 trade-off를 설명해 주세요.

### 시간 할당량 크기에 따른 변화
* **매우 큰 경우 :** 선입 선처리 방식과 동일하게 동작하여 응답 시간이 길어짐.
* **매우 작은 경우 :** 빈번한 문맥 교환으로 인해 시스템 오버헤드가 급증하며 실질적인 계산 작업 효율이 급격히 떨어짐.
* **결론 :** 문맥 교환 비용에 비해 충분히 크면서도 사용자가 응답성을 느낄 수 없을 만큼 적절한 크기를 설정하는 것이 중요 

---

## 싱글 스레드 CPU 에서 상시로 돌아가야 하는 프로세스가 있다면, 어떤 스케쥴링 알고리즘을 사용하는 것이 좋을까요? 또 왜 그럴까요?

### 권장 알고리즘 및 이유
**우선순위 스케줄링**을 사용하여 해당 프로세스에 가장 높은 우선순위를 부여하거나, **비선점형 스케줄링**을 사용하는 것이 적합함. 상시 실행이 보장되어야 하므로 타 프로세스에 의해 자원을 빼앗기는 선점 발생을 최소화하여 실행의 연속성을 유지해야 하기 때문 

---

## 동시성과 병렬성의 차이에 대해 설명해 주세요.

### 핵심 개념
* **동시성 :** 단일 중앙처리장치에서 여러 작업을 아주 짧은 시간 단위로 교체하며 실행하여, 사용자에게는 동시에 실행되는 것처럼 보이게 하는 논리적 개념 
* **병렬성 :** 다중 코어나 다중 중앙처리장치에서 실제로 여러 작업을 물리적으로 동시에 수행하는 물리적 개념 

---

## 타 스케쥴러와 비교하여, Multi-level Feedback Queue는 어떤 문제점들을 해결한다고 볼 수 있을까요?

### 해결 과제
1. **기아 현상 해결 :** 에이징 기법을 통해 오래 대기한 프로세스의 우선순위를 높여 무한정 대기하는 문제를 방지함.
2. **반응성 및 효율성 조화 :** 짧은 작업(입출력 위주)에는 높은 우선순위를 주고, 긴 작업(연산 위주)은 낮은 우선순위 큐로 내려보내 전체적인 응답 시간과 처리량을 동시에 최적화함.
3. **사전 정보 불필요 :** 최단 작업 우선 방식과 달리 실행 시간을 미리 예측할 필요 없이 실행 이력을 바탕으로 동적으로 판단함.



---

## FIFO 스케쥴러는 정말 쓸모가 없는 친구일까요? 어떤 시나리오에 사용하면 좋을까요?

### 활용 시나리오
쓸모가 없는 것이 아니며, **일괄 처리 시스템**이나 **작업 시간이 일정하고 문맥 교환 오버헤드를 극도로 줄여야 하는 환경**에서 유용함. 예를 들어 복잡한 계산을 수행하는 과학 연산 작업이나 데이터 백업 프로세스 등 응답성보다 완료 시간이 중요한 대규모 작업에 적합함.

---

## 우리는 스케줄링 알고리즘을 "프로세스" 스케줄링 알고리즘이라고 부릅니다. 스레드는 다른 방식으로 스케줄링을 하나요?

### 사실 관계
실제 현대 운영체제 커널은 프로세스가 아닌 **스레드**를 스케줄링의 기본 단위로 삼음. 다만 스레드가 프로세스의 자원 범주 내에 속해 있으므로 관습적으로 프로세스 스케줄링이라 부르는 경우가 많음. 알고리즘 자체의 논리는 스레드 단위로 동일하게 적용됨.

---

## 유저 스레드와 커널 스레드의 스케쥴링 알고리즘은 똑같을까요?

### 차이점
* **커널 스레드 :** 운영체제 커널이 직접 스케줄링 알고리즘을 적용하여 중앙처리장치를 할당함.
* **유저 스레드 :** 커널은 이들의 존재를 모르며, 사용자 영역의 스레드 라이브러리가 스케줄링을 담당함. 따라서 커널이 적용하는 알고리즘과 라이브러리가 사용하는 알고리즘이 다를 수 있으며, 하나의 유저 스레드가 차단되면 프로세스 내의 모든 유저 스레드가 멈추는 등의 특성 차이가 발생함.