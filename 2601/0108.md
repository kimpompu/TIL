# 260108 TIL

## 서버를 무중단 배포(Zero Downtime Deployment)하는 방법에 대해 설명해 주세요.


- 무중단 배포(Zero Downtime Deployment) : 서비스 이용자에게 다운타임(접속 불가 시간) 없이 새로운 버전을 배포하는 기술

### 트래픽 스위칭 전략
* **로드 밸런서(Nginx, ELB 등)** 활용하여 구버전 서버와 신버전 서버 간의 트래픽을 적절히 제어해서 배포. 
ex) 롤링(Rolling), 블루-그린(Blue-Green), 카나리(Canary) 

## CI/CD(Continuous Integration/Continuous Deployment) 파이프라인을 구축한 경험이 있나요? 사용한 도구를 설명해 주세요.

### 자동화 프로세스 구축 경험
**Github Actions** 활용하여 파이프라인을 구축한 경험이 있음. 개발자가 메인 브랜치에 코드를 푸시하면 Github Actions가 자동으로 빌드 및 테스트(CI)를 수행함. 테스트 통과 시 Docker Image 업로드하고, EC2 서버에 자동으로 배포(CD)되도록 구성함


##  도커(Docker) 컨테이너와 가상 머신(VM)의 차이점을 설명해주세요.

* **가상 머신(VM)** : 하드웨어 자체를 가상화하여 게스트 OS를 포함하므로 무겁고 부팅 속도가 느림. 
* **도커 컨테이너** : 호스트 OS의 커널을 공유하며 프로세스 단위로 격리하므로 매우 가볍고 실행 속도가 빠름. 
### 차이점
- OS 공유 여부와 경량화
    애플리케이션 실행에 필요한 바이너리와 라이브러리만 패키징하므로 이식성과 자원 효율성 면에서 컨테이너가 유리함.



##  마이크로서비스 아키텍처(MSA)란 무엇이며, 이를 사용해야 하는 이유를 설명해 주세요.

* **MSA** : 하나의 거대한 애플리케이션을 비즈니스 기능별로 나누어 독립적인 서비스(Microservice)들의 집합으로 구성하는 아키텍처. 

### 사용하는 이유
1. 각 서비스가 독립적으로 배포 및 확장이 가능하여 시스템의 **결합도(Coupling)** 낮추고 **응집도(Cohesion)** 높일 수 있음. 
2. 특정 서비스의 장애가 전체 시스템으로 전파되지 않는 **장애 격리** 효과와 서비스별로 적합한 기술 스택을 사용할 수 있는 유연성


## Blue-Green 배포와 Canary 배포의 차이점과 사용 사례를 설명해주세요.

### 배포 안정성 전략 비교
* **Blue-Green** : `구버전(Blue)`과 동일한 규모의 `신버전(Green)` 환경을 구성한 뒤, 로드 밸런서의 설정을 변경하여 트래픽을 일시에 신버전으로 전환하는 방식. 롤백이 빠르고 확실하지만, 인프라 리소스가 2배로 필요함.
* **Canary** : 광산의 카나리아처럼 소수의 사용자(예: 5%)에게만 **신버전을 먼저 노출**하여 오류를 검증한 뒤, 점진적으로 트래픽 비중을 늘려가는 방식. 오류 발생 시 파급력을 최소화할 수 있어 안정성이 중요한 대규모 서비스에 적합함.



## Kubernetes에서 Pod가 무엇인지 설명하고, Pod의 라이프사이클을 설명해주세요.

### 쿠버네티스의 배포 단위
* **Pod** 
    * 쿠버네티스에서 생성하고 관리할 수 있는 가장 작은 컴퓨팅 단위
    * 하나 이상의 컨테이너 그룹
    * 같은 Pod 내의 컨테이너들은 스토리지와 네트워크(IP)를 공유
    * 영속적이지 않고 언제든 재생성될 수 있는 객체
* **라이프사이클** : 정의 후 스케줄링 대기 중인 `Pending`, 컨테이너가 생성되고 실행 중인 `Running`, 작업이 성공적으로 완료되면 `Succeeded`, 또는 실패하면 `Failed` 단계로 구분. 


## 로깅(logging)의 중요성과 서버 애플리케이션에서 로그를 효과적으로 관리하는 방법을 설명해 주세요.

### 중앙 집중형 로그 관리
* 로그는 시스템의 상태 파악, 장애 원인 분석(Troubleshooting), 보안 감사를 위해 필수적. MSA 같은 분산 환경에서는 각 서버에 접속해 로그를 확인하기 어려움
* **ELK Stack(Elasticsearch, Logstash, Kibana)** 등을 도입하여 로그를 중앙에서 수집하고 통합 관리하는 것이 효과적
* 애플리케이션 레벨에서는 **비동기 로깅(Async Appender)** 사용하여 로깅 작업으로 인한 성능 저하를 방지해야 함.

## 애플리케이션 배포 시 발생할 수 있는 다운타임 최소화 방법을 설명해 주세요.

### Graceful Shutdown과 Readiness Probe
* 무중단 배포 전략 사용과 더불어 애플리케이션 종료 및 시작 시점의 처리가 중요
1.  **Graceful Shutdown** : 종료 신호(SIGTERM)를 받으면 즉시 꺼지는 것이 아니라, 로드 밸런서 연결을 끊고 현재 처리 중인 요청을 모두 완료한 뒤 종료하도록 설정
2.  **Health Check(Readiness Probe)** : 애플리케이션이 시작될 때 DB 연결이나 초기화가 완료될 때까지 트래픽 유입을 막고, 완전히 준비된 상태(`200 OK`)에서만 요청을 받도록 설정하여 배포 직후의 에러를 방지