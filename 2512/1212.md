# 251212 TIL

## EC2 배포 순서
| 단계 | 행위 | 필요한 핵심 기술/개념 | AWS 관련 설정 |
| :--- | :--- | :--- | :--- |
| **1. Build** | JAR 생성 | Java, Gradle/Maven | - |
| **2. Dockerize** | 이미지 빌드 | Dockerfile, `docker build` | - |
| **3. Push** | 이미지 업로드 | Docker Hub 계정, `docker push` | - |
| **4. Pull** | EC2로 다운로드 | Linux CLI, `docker pull` | EC2 Outbound (인터넷 연결) |
| **5. Run** | 컨테이너 실행 | `docker-compose.yml` 작성법 | - |
| **6. Connect** | DB 연결 (Mongo) | Docker Network (서비스명으로 통신) | EBS (데이터 영구 저장소 볼륨) |
| **7. Connect** | DB 연결 (Redis) | Redis Connection String | **Security Group (6379 포트 오픈)** |


## Docker 배포 vs JAR 직접 배포
- 차이점은 **'환경 격리'**와 **'이식성(Portability)'**

### JAR 직접 배포
1. 방식 : 서버(OS)에 JDK(Java Development Kit)를 직접 설치하고, 빌드된 .jar 파일만 복사하여 `java -jar app.jar` 명령어로 실행

2. 단점 : 서버의 JDK 버전, 환경 변수, OS 설정 등이 개발 로컬 환경과 다를 경우 오류가 발생

### Docker 배포 
1. 방식 : 애플리케이션(JAR)뿐만 아니라 실행에 필요한 JDK, OS 설정, 환경 변수 등을 하나의 **이미지(Image)**로 묶음. 서버에는 Docker만 설치되어 있으면 동작

2. 장점: 어떤 서버에서든 이미지만 가져오면(Pull) 동일한 환경에서 실행됨을 보장. 배포 및 롤백이 빠르고 관리가 용이

### 서버(Server)
1. 정의 : 네트워크를 통해 클라이언트(Client, 사용자나 다른 컴퓨터)의 요청을 받아 데이터를 제공하거나 특정 작업을 수행하는 컴퓨터 시스템 또는 소프트웨어

2. 하드웨어적 의미 : 365일 24시간 켜져 있으면서 서비스를 제공하는 고성능의 물리적 컴퓨터 기계.

3. 소프트웨어적 의미 : 웹 사이트를 보여주는 웹 서버(Nginx, Apache), 데이터를 저장하는 DB 서버(MySQL) 등 특정 역할을 수행하는 프로그램.

### 클라우드 서버(Cloud Server)
1. 정의 : 물리적인 서버를 직접 구매하거나 데이터 센터에 입주하는 대신, 인터넷(클라우드)을 통해 가상화된 서버 자원을 빌려 쓰는 형태

2. 특징

- 가상화(Virtualization) : 하나의 거대한 물리 서버를 쪼개어 여러 개의 독립된 가상 서버로 만듦

- 유연성: 필요할 때 즉시 생성하고, 필요 없으면 삭제할 수 있음

- 종량제: 사용한 시간만큼만 비용을 지불

### ECS(Elastic Container Service)
1. 정의 : AWS에서 제공하는 완전 관리형 컨테이너 오케스트레이션 서비스

2. 역할 : Docker 컨테이너들을 쉽고 빠르게 실행, 중지, 관리할 수 있게 함

3. 특징 : 여러 개의 EC2 인스턴스 위에서 컨테이너를 적절히 분배하여 실행하거나, 서버 관리 없이 컨테이너만 띄우는 Fargate 모드를 사용할 수 있음

### EC2(Elastic Compute Cloud)
1. 정의 : AWS에서 제공하는 크기 조절이 가능한 **가상 서버(Virtual Machine)**

2. 역할: 사용자가 운영체제(Linux, Windows)부터 소프트웨어 설치, 네트워크 설정까지 모든 것을 직접 제어할 수 있는 가장 기본적인 컴퓨팅 자원

### CI (Continuous Integration, 지속적 통합)
- 작성한 코드를 **중앙 저장소(Git 등)에 병합(Merge)**하고, 그 과정에서 자동으로 빌드 및 테스트를 수행
- 주요 프로세스
    1. 개발자가 코드를 커밋(Commit)하고 푸시(Push)
    2. CI 서버(예: Jenkins, GitHub Actions)가 코드를 감지하고 자동으로 **빌드(Build)**
    3. 단위 테스트(Unit Test) 및 통합 테스트를 수행하여 코드 무결성을 검증

### CD
- 지속적 제공(Continuous Delivery) 또는 지속적 배포(Continuous Deployment)

1. Continuous Delivery(지속적 제공)
- 정의 : CI 과정을 통과한 코드를 **언제든지 배포할 수 있는 상태(Release Ready)**로 만들어 스테이징 환경 등에 자동으로 배포해 두는 것

- 특징 : 운영 환경(Production)으로의 최종 배포는 **사람(개발자 또는 관리자)의 수동 승인(Manual Approval)**이 필요

2. Continuous Deployment(지속적 배포)
- 정의 : Continuous Delivery의 다음 단계로, 테스트를 통과한 코드가 사람의 개입 없이 자동으로 운영 환경에 배포
- 특징 : 개발자가 코드를 메인 브랜치에 병합하면, 몇 분 내에 실제 사용자가 사용하는 서비스에 반영

| 단계 | CI(지속적 통합) | Continuous Delivery(지속적 제공) | Continuous Deployment(지속적 배포) |
| :--- | :--- | :--- | :--- |
| **자동화 범위** | 빌드 + 테스트 | 빌드 + 테스트 + **스테이징 배포** | 빌드 + 테스트 + 스테이징 + **운영 배포** |
| **운영 배포 방식** | (범위 아님) | **수동 (Manual)** | **자동 (Automatic)** |
| **목표** | 코드 품질 유지, 버그 조기 발견 | 배포 준비 상태 유지 | 신속한 기능 제공 및 피드백 |