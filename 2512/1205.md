# 251205 TIL

## 문제

```java
import org.springframework.context.annotation.Configuration;
import org.springframework.data.mongodb.config.EnableMongoAuditing;

@Configuration
@EnableMongoAuditing
public class MongoAuditConfig {

}

```

```java
@CreatedDate
@Field("created_at")
private LocalDateTime createdAt;
```

Auditing 설정과 `@CreatedDate` 어노테이션 작성해도 생성시 `createdAt` 필드 값이 입력되지 않음

## 원인

TSID를 직접 생성해서 할당 → Spring에서 `@Id` 가 미리 채워져있어서 `update`로 인식

## 해결

### `Persistable` 구현

```java
public class Notification implements Persistable<Long> {

	...
	
	@Override
    public boolean isNew() {
        return createdAt == null;
    }
}
```

- `save()` 호출 시 `isNew()`를 체크 → `createdAt`이 `null` 일 때 `@CreatedDate` 실행