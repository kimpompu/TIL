# 1011 TIL

## 1. CPU 스케쥴링

### 정의
여러 프로세스가 동시에 실행 대기(Ready) 상태일때, 어떤 프로세스에게 CPU 자원을 먼저 할당할지 결정하는 알고리즘

### 상태전이

        +----------------+
        |                |
        |    New         |
        | (생성 중) |
        +----------------+
                 |
                 v
        +----------------+
        |                |
        |    Ready       |<---------------------+
        | (CPU 대기중) |                      |
        +----------------+                     |
                 |                             |
                 v                             |
        +----------------+                     |
        |                |                     |
        |   Running      |                     |
        | (CPU 사용) |                      |
        +----------------+                     |
          |         |                          |
          |         |                          |
     +----+         +----+                     |
     |                   |                     |
     v                   v                     |
    +----------+     +----------------+            | 
    | Waiting  |     |   Terminated   |            |
    | (I/O 등  |     |   (프로세스 종료) |<--+     |
    | 대기 상태)|     +----------------+   |       |
    +----------+                           |        |
     |                                 |        |
     +----------------> Ready <-------+-----+
           (I/O 완료 시 CPU 대기 큐로 복귀)

- 스케쥴러는 상태 전이 시점마다 호출된다.

### 기준
| 척도                                 | 설명                                                        | 계산 방법 |
| ------------------------------------ | ----------------------------------------------------------- | ---------- |
| **CPU 이용률** (CPU Utilization)     | CPU가 실제로 작업을 처리한 시간의 비율<br>높을수록 자원 활용도가 높음 | `(CPU 사용 시간 / 전체 시간) × 100%` |
| **처리량** (Throughput)              | 단위 시간 동안 완료된 프로세스 수                           | `총 완료된 프로세스 수 / 전체 시간` |
| **반환 시간** (Turnaround Time)      | 하나의 프로세스가 **도착 → 종료**까지 걸린 총 시간<br>사용자가 체감하는 총 소요 시간 | `종료 시간 - 도착 시간` |
| **대기 시간** (Waiting Time)         | 프로세스가 Ready 큐에서 **CPU 할당을 기다린 시간 총합**     | `반환 시간 - CPU 버스트 시간`<br>또는 `시작 시간 - 도착 시간 + (이후 대기 시간 합)` |
| **응답 시간** (Response Time)        | 대화형 시스템 등에서 **처음 요청 → 첫 CPU 할당까지** 걸린 시간 | `첫 CPU 시작 시간 - 도착 시간` |

- 시스템의 목적에 따라 우선시할 기준을 선정한 후 알고리즘을 선택한다.

### 종류
- 비선점형(non-preemptive)
- 선점형(preemptive)

| 알고리즘                                       | 선점 여부        | 장점                                  | 단점 / 리스크                                | 적합한 환경 / 비고                      |
| -------------------------------------------- | --------------- | ------------------------------------- | ------------------------------------------- | ---------------------------------------- |
| **FCFS** (First-Come, First-Served)          | 비선점형         | 단순, 문맥 전환 적음                          | Convoy 효과, 긴 대기 시간                         | 배치 작업, 단순 시스템                     |
| **SJF** (Shortest Job First, 비선점형)        | 비선점형         | 평균 대기 시간 최적                           | CPU 버스트 예측 필요, 기아 위험                    | 작업 시간이 예측 가능할 때                  |
| **SRTF** (Shortest Remaining Time First)     | 선점형           | 응답성과 대기 시간 개선 가능                    | 예측 오차 민감, 구현 복잡                           | 작업 시간이 유동적일 때                     |
| **Priority Scheduling**                      | 선점 / 비선점형   | 중요 작업 우선 처리 가능                        | 기아 발생 가능, 우선순위 역전(Priority Inversion) 문제 | 실시간 또는 중요도 기반 시스템               |
| **RR** (Round Robin)                         | 선점형           | 응답 시간 짧음, 공정성 보장                     | 문맥 전환 많음, 평균 대기/반환 시간 비최적             | 대화형 시스템, 타임 셰어링 시스템             |
| **Multilevel Queue**                         | (보통 선점형)     | 작업 유형별로 다른 정책 적용 가능                 | 큐 간 이동 불가, 유연성 부족, 기아 발생 가능            | 서로 다른 클래스 작업 혼합 시스템             |
| **Multilevel Feedback Queue**                | 선점형           | 유연성 높고 적응성 있음                         | 큐 이동 규칙/파라미터 설정 복잡                       | 범용 운영체제에서 이상적인 후보               |
| **Dynamic Priority / Real-Time**<br>(예: EDF, LST) | 선점형       | 실시간 보장, 동적 조정 가능                     | 스케줄 가능성 판단 필요, 높은 복잡도                   | 실시간 시스템, 임베디드 시스템                |
| **Fair-share / CFS / EEVDF** (Linux)         | 선점형           | 공정성 중심, 우선순위 가중치 기반 실행 가능           | 트리 구조 관리 복잡성, vruntime 계산 등 오버헤드         | 범용 운영체제 (Linux 등)                    |
