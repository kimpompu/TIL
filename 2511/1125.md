# 251125 TIL

## Elasticsearch의 기본 아키텍처와 주요 컴포넌트(Cluster, Node, Index, Document 등)에 대해 설명해주세요.

### 물리적 아키텍처
1. Cluster
- 정의 : 하나 이상의 **노드(Node)**들이 모여 이루어진 전체 시스템의 집합
- 특징
    - 모든 데이터를 저장하고 통합된 인덱싱 및 검색 기능을 제공
    - 고유한 이름(cluster.name)을 가지며, 노드들은 이 이름을 통해 클러스터를 식별하고 합류
    - 하나의 클러스터에 수백, 수천 개의 노드를 포함할 수 있어 수평적 확장(Scale-out)이 용이

2. Node
- 정의 : 클러스터에 포함된 단일 서버 인스턴스
- 특징 : 데이터를 저장하고 클러스터의 인덱싱 및 검색 기능에 참여
- 역할
    - Master Node : 클러스터 상태 관리, 인덱스 생성/삭제, 노드 추적 등 전반적인 관리를 담당
    - Data Node : 실제 데이터를 저장하고, 검색/집계(CRUD)와 같은 I/O 작업을 수행. 리소스를 가장 많이 사용
    - Ingest Node : 데이터를 인덱싱하기 전 전처리(Pre-processing) 파이프라인을 실행
    - Coordination Node : 클라이언트의 요청을 받아 적절한 데이터 노드로 라우팅하고, 결과를 취합하여 반환(로드 밸런서 역할)

### 논리적 아키텍처

1. Index
- 정의 : 유사한 특성을 가진 Document들의 모음
- 특징
    - RDBMS의 Database와 유사한 개념
    - 검색, 수정, 삭제 등의 작업은 이 인덱스 이름을 통해 수행
    - 하나의 클러스터 내에 개수 제한 없이 인덱스를 생성할 수 있음
    - 물리적으로는 여러 개의 **Shard(샤드)**로 분산되어 저장

2. Document
- 정의 : 인덱싱 되어 검색 가능한 기본 정보 단위
- 특징
    - RDBMS의 Row에 해당
    - JSON(Javascript Object Notation) 형식으로 저장
    - 다양한 **Field(필드)**로 구성되며, 이는 RDBMS의 Column에 해당
    - 스키마가 유연하여(Schema-less), 사전에 정의하지 않아도 데이터 입력 시 자동으로 필드 타입이 매핑될 수 있음

### 데이터 분산 및 고가용성

1. Shard
- 정의 : 인덱스를 여러 개의 조각으로 나눈 것
- `Primary Shard` : 원본 데이터가 저장되는 샤드. 인덱스 생성 시 개수를 정하며(기본 1개), 이후 변경이 어려움

2. Replica
- 정의 : Primary Shard의 복제본
- 역할
    - 고가용성(High Availability) : Primary Shard가 있는 노드가 다운되더라도 데이터 유실을 막고 서비스를 지속
    - 검색 성능 향상 : 검색 요청을 Primary와 Replica로 분산 처리(병렬 처리)하여 처리량을 높임

| Elasticsearch | RDBMS (관계형 데이터베이스) | 설명 |
| :--- | :--- | :--- |
| **Index** | Database | 데이터 저장의 최상위 논리적 단위 |
| **Mapping** | Schema | 데이터의 구조 및 필드 타입 정의 |
| **Document** | Row | 데이터의 최소 단위 (JSON 형식) |
| **Field** | Column | 데이터 내의 속성 값 |
| **Shard** | Partition | 데이터를 물리적으로 분산 저장하는 단위 |    