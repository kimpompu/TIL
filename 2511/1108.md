# 251108 TIL

## Spring Bean의 라이프사이클과 관련 콜백 메서드에 대해 설명해주세요.

| 단계                                  | 설명                                         | 대표 콜백/인터페이스                                              | 비고                                                            |
| ----------------------------------- | ------------------------------------------ | -------------------------------------------------------- | ------------------------------------------------------------- |
| **1. 정의(Definition)**               | `@Component`, `XML`, `Java Config` 등으로 Bean 등록 | —                                                        | `BeanDefinition` 생성                                             |
| **2. 생성(Creation)**                 | `Spring 컨테이너`가 객체 인스턴스화                      | 생성자 호출                                                   | —                                                             |
| **3. 의존성 주입(Dependency Injection)** | `@Autowired`, `@Value` 등으로 주입              | —                                                        | 프로퍼티 세팅                                                       |
| **4. 초기화(Initialization)**          | Bean 초기화 단계                                | `@PostConstruct`, `afterPropertiesSet()`, `initMethod()` | `@PostConstruct` → `afterPropertiesSet()` → `initMethod()` 순서 |
| **5. 사용(Ready for Use)**            | 실제 비즈니스 로직 수행                              | —                                                        | 컨테이너 내에서 사용                                                   |
| **6. 소멸(Destruction)**              | 컨테이너 종료 시 자원 해제                            | `@PreDestroy`, `destroy()`, `destroyMethod()`            | `@PreDestroy` → `destroy()` → `destroyMethod()` 순서            |
| **7. 종료(Shutdown)**                 | Bean 제거 및 GC 대상                            | —                                                        | Prototype 스코프는 직접 관리 필요                                       |

### 콜백 호출 순서
- 초기화
1. @PostConstruct 메서드
2. afterPropertiesSet()(InitializingBean)
3. 사용자 정의 init() 메서드 (혹은 initMethod로 지정된 메서드)

- 소멸

1. @PreDestroy
2. destroy()(DisposableBean)
3. 사용자 정의 destroy() 메서드 (또는 destroyMethod)


## @Component, @Service, @Repository의 차이점 및 사용 사례는 무엇인가요?

- `@Component` : 가장 일반적인 스테레오타입(stereotype) 애노테이션으로, Spring이 관리하는 컴포넌트(빈)임을 표시
- `@Service` : @Component의 특수화된 형태(specialization)로, 비즈니스 로직(business logic)을 가지는 서비스 계층(service layer)에서 사용
- `@Repository` : @Component의 특수화된 형태로, 데이터 접근(DAO, persistence) 계층에서 사용하는 것이 권장됩니다. 또 하나 특징은, Spring이 예외 번역(exception translation) 기능을 제공하는 대상이 될 수 있다

| 애노테이션         | 계층(Layer) | 주요 목적                   | 내부 기능 차이            | 사용 예시                       |
| ------------- | --------- | ----------------------- | ------------------- | --------------------------- |
| `@Component`  | 공통 (기본)   | Spring이 관리하는 일반 컴포넌트 등록 | 별도의 추가 기능 없음        | 공통 유틸리티, 헬퍼 클래스             |
| `@Service`    | 서비스 계층    | 비즈니스 로직 담당 클래스 표시       | 기능은 같으나 의미적 명확성 제공  | 회원가입 서비스, 결제 서비스            |
| `@Repository` | 영속성 계층    | DAO/Repository 계층 담당    | 예외 변환(AOP 기반) 자동 처리 | JPA Repository, MyBatis DAO |




| 질문                                                 | 핵심 답변 요약                                                                                           |
| -------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| **Spring Bean의 생명주기를 설명하세요.**                      | Bean 생성 → 의존성 주입 → 초기화 → 사용 → 소멸 순서로 진행되며, 각 단계에서 `@PostConstruct` / `@PreDestroy` 등 콜백 메서드로 제어 가능 |
| **`@Component`, `@Service`, `@Repository`의 차이점은?** | 기능상 동일하지만 계층 구분 목적. `@Repository`는 예외 변환을 추가 지원                                                    |
| **`prototype` 스코프 Bean의 destroy 메서드가 호출되나요?**      | 자동 호출되지 않음. 개발자가 직접 정리해야 함                                                                         |
| **Bean 초기화 콜백 순서는?**                               | `@PostConstruct` → `afterPropertiesSet()` → `initMethod()` 순서                                      |
