# 251119 TIL

## Redis의 기본 개념과 주요 특징은 무엇인가요?

### Redis
- 인메모리 데이터베이스 : 모든 데이터를 RAM에 저장하여 디스크 I/O를 최소화함으로써 **매우 빠른 응답 시간(밀리초 미만)**을 제공
- 다양한 데이터 구조 지원 : 단순한 키-값(Key-Value) 쌍을 넘어 String, List, Hash, Set, Sorted Set 등 다양한 고수준의 데이터 구조를 지원
- 지속성(Persistence) 지원 : 메모리 기반이지만 RDB(스냅샷)와 AOF(로그 파일) 방식을 통해 데이터를 디스크에 저장하여 서버 재시작 후에도 데이터를 복구할 수 있음
- 단일 스레드 모델 : I/O 멀티플렉싱을 통해 단일 스레드로 동작하면서도 높은 성능을 유지합니다. 이는 **원자성(Atomicity)**을 보장하는 데 용이

## Redis가 메모리 기반 데이터 저장소로서 제공하는 장점은 무엇이며, 이로 인한 단점은 무엇인가요?

### 장점
- 극도의 고성능/저지연 : 데이터 접근이 RAM에서 직접 이루어지므로, 디스크 기반 데이터베이스보다 월등히 빠르며, 캐싱, 세션 저장소, 순위표 등 실시간 처리가 중요한 유스케이스에 최적화
- 복잡한 데이터 구조 지원을 통한 유연성 : 단순한 캐시(Memcached와 같은)를 넘어, 다양한 데이터 구조를 지원하여 개발자가 애플리케이션의 특정 문제(예: 대기열, 고유 항목 관리, 랭킹)를 효율적으로 해결할 수 있음
- 원자성 보장 : 단일 스레드 특성 덕분에 모든 명령이 원자적으로 실행되어, 여러 클라이언트가 동시에 데이터에 접근하더라도 데이터의 일관성을 쉽게 유지할 수 있음

### 단점
- 비용 및 용량 제약: 모든 데이터를 RAM에 저장해야 하므로, 데이터셋의 크기가 서버의 물리적 메모리 용량에 의해 제한됨. 디스크 기반 저장소에 비해 대규모 데이터셋 저장 시 비용이 훨씬 높음
- 데이터 유실 가능성 (Persistence 미적용 시): 지속성(Persistence) 옵션을 사용하지 않거나, 설정된 저장 시점 이전에 서버에 치명적인 장애가 발생하면 메모리에 있던 데이터가 유실될 수 있음
- 복잡한 데이터 쿼리 한계: Key-Value 저장소이므로, 관계형 데이터베이스(RDB)나 도큐먼트 데이터베이스(MongoDB 등)처럼 복잡한 JOIN 연산이나 필드 기반의 정교한 쿼리 기능을 기본적으로 제공하지 않음

## Redis에서 제공하는 데이터 타입(스트링, 리스트, 셋, 정렬된 셋, 해시 등)에 대해 설명해주세요.

| 데이터 타입            | 설명                                                                                 | 주요 사용 사례                                                    | 주요 명령어                                                                  |
|------------------------------------|-------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| String (문자열)                    | 가장 기본적인 타입. 텍스트, 정수, 바이너리 데이터(최대 512MB) 저장. 카운터로도 사용됨.              | 캐싱, 세션 정보 저장, 분산 락, 페이지 뷰 카운터                                 | `SET`, `GET`, `MGET`, `INCR`, `DECR`, `APPEND`, `GETSET`                                        |
| List (리스트)                      | 삽입 순서를 유지하는 문자열 리스트. 양쪽 끝에서 빠른 삽입/삭제 가능.                                | 메시지 큐(Queue), 타임라인, 스택(Stack)                                          | `LPUSH`, `RPUSH`, `LPOP`, `RPOP`, `LRANGE`, `LLEN`, `LREM`                                       |
| Set (셋)                           | 정렬되지 않은 고유 문자열 집합. 빠른 집합 연산 제공.                                                 | 태그 저장, 고유 방문자(Unique Visitor), 친구 목록 관리                           | `SADD`, `SREM`, `SMEMBERS`, `SCARD`, `SISMEMBER`, `SUNION`, `SINTER`, `SDIFF`                    |
| Sorted Set (정렬된 셋, ZSet)       | Score 기반으로 정렬되는 Set. 실시간 랭킹 등에 사용.                                                  | 실시간 리더보드, 점수 기반 정렬 리스트                                          | `ZADD`, `ZRANGE`, `ZREVRANGE`, `ZREM`, `ZSCORE`, `ZINCRBY`, `ZRANK`, `ZREMRANGEBYSCORE`           |
| Hash (해시)                        | 하나의 키 아래 여러 필드-값 쌍 저장. 객체 구조 표현에 적합.                                          | 사용자 프로필, 객체 저장                                                         | `HSET`, `HGET`, `HMSET`, `HGETALL`, `HDEL`, `HEXISTS`, `HLEN`                                    |
| (전체 Redis 공통)                  | -                                                                                                     | -                                                                                 | `SAVE`, `BGSAVE`, `EXPIRE`, `DEL`, `KEYS`, `TTL`                                                 |


## Redis의 키-값 구조와 다른 NoSQL 데이터베이스와의 차이점은 무엇인가요?
### 특징
- **값(Value)**의 부분이 단순한 Blob(Binary Large Object)이 아닌, **다양한 형태의 데이터 구조(List, Hash, Set 등)**를 가질 수 있다
- 데이터는 오직 키를 통해서만 접근하며, 키 자체를 기반으로 하는 간단하고 빠른 조회가 가능

| 비교 요소      | Redis (Key-Value/Data Structure Store)                               | MongoDB (Document Store)                                   | Cassandra (Column-Family Store)                                   |
|-----------------------------|------------------------------------------------------------------------|-------------------------------------------------------------|--------------------------------------------------------------------|
| 데이터 저장소               | RAM(인메모리) 기반                                                     | 디스크 기반                                                 | 디스크 기반                                                         |
| 데이터 모델                 | 키와 다양한 데이터 구조 (String, List, Hash 등)                       | JSON/BSON 형태의 유연한 문서(Document)                     | 테이블, 키 공간, 컬럼 패밀리                                       |
| 주요 사용 사례             | 캐싱, 세션 관리, 리더보드, 실시간 메시징                               | 일반적인 데이터베이스, 콘텐츠 관리, 카탈로그               | 대규모 분산 환경, 높은 쓰기 처리량, 시계열 데이터                  |
| 쿼리 복잡성                | 낮음 (키 기반 조회 및 데이터 구조 명령)                               | 높음 (필드 기반 쿼리, 인덱스 활용)                         | 중간 (파티션 키 기반 조회)                                         |
| 성능 특징                  | 최고 속도/최저 지연 (밀리초 미만)                                     | 높은 처리량 및 확장성                                       | 높은 가용성 및 선형적 확장성                                       |


## Redis에서 Persistence를 위해 지원하는 RDB와 AOF 방식의 차이점과 각각의 장단점은 무엇인가요?

| 구분 (Criteria)        | RDB (Redis Database)                                                                 | AOF (Append Only File)                                                             |
|------------------------|----------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
| 작동 방식              | 특정 시점의 데이터셋 전체를 스냅샷으로 바이너리 파일(dump.rdb)에 저장                | 서버에 전달된 모든 쓰기 명령을 로그 파일(appendonly.aof)에 순차적으로 기록          |
| 데이터 유실 위험       | 상대적으로 높음 (설정된 저장 주기 사이 데이터 유실 가능)                             | 상대적으로 낮음 (최대 1초 단위 유실)                                                |
| 파일 포맷              | 압축된 바이너리 포맷                                                                   | 텍스트 기반 포맷 (사람이 읽고 편집 가능)                                             |
| 파일 크기              | 상대적으로 작음 (데이터셋의 현재 상태만 저장)                                         | 상대적으로 큼 (모든 연산 기록)                                                      |
| 복구 속도              | 매우 빠름 (바이너리 파일 로드)                                                         | 상대적으로 느림 (모든 명령을 재실행해야 함)                                          |

### RDB의 장단점
- 장점
    - 백업 파일이 작고 압축률이 높아 재해 복구에 유리
    - 재시작 시 데이터 복구 속도가 빠름
    - 백그라운드 프로세스로 동작하여 메인 프로세스 성능에 미치는 영향이 적음

- 단점
    - 저장 주기 사이에 서버가 비정상적으로 종료되면 그 동안의 데이터는 유실

 ### AOF의 장단점
- 장점 
    - RDB보다 데이터 유실 위험이 훨씬 낮아(초 단위) 데이터 안전성이 높음
    - AOF 파일을 재작성(Rewrite)하여 크기를 최적화할 수 있음

- 단점
    - 파일 크기가 RDB보다 커질 수 있음
    - 복구 시 모든 명령을 재생해야 하므로 복구 시간이 더 오래 걸림
    - fsync 설정에 따라 쓰기 성능에 영향을 줄 수 있음   

## Redis의 Pub/Sub 기능은 어떻게 동작하며, 이를 활용한 메시징 시스템 구현 사례에 대해 설명해주세요.
- 채널(Channel) : 메시지가 전달되는 통신 경로
- 구독자(Subscriber) : `SUBSCRIBE channel_name` 명령을 사용하여 특정 채널에 관심을 표명(구독)
- 발행자(Publisher) : `PUBLISH channel_name message` 명령을 사용하여 특정 채널에 메시지를 보넴
- Redis 서버 : 발행자로부터 메시지를 받으면, 해당 채널을 구독하고 있는 모든 활성 구독자에게 메시지를 즉시 브로드캐스트

### 동작원리
- **발행자(Publisher)**와 구독자(Subscriber) 간의 메시징 패턴 
- 메시지를 보내는 쪽과 받는 쪽이 서로의 존재를 알 필요 없이 메시지를 교환하는 **디커플링(Decoupling)**된 통신 방식

### 구현 사례
- 실시간 채팅 애플리케이션 : 사용자가 채팅방(채널)에 메시지를 게시(Publish)하면, 해당 방을 구독(Subscribe)하고 있는 모든 사용자에게 즉시 메시지가 전달
- 라이브 알림/업데이트 : 웹소켓 서버와 연결된 클라이언트에게 실시간 알림(예: 새로운 댓글, 팔로우)이나 라이브 스포츠 점수 업데이트 등을 브로드캐스트
- 캐시 동기화/무효화 : 여러 애플리케이션 서버 인스턴스 간에 공유 캐시의 데이터가 업데이트되었음을 알리고, 캐시를 무효화(Invalidate)하거나 새로고침(Refresh)하도록 조정하는 데 사용
- 작업 조정(Task Coordination) : 마이크로서비스 아키텍처에서 한 서비스가 특정 이벤트(예: 파일 업로드 완료)를 채널에 발행하고, 다른 서비스들이 이를 구독하여 후속 작업(예: 이미지 처리, 알림 발송)을 트리거하는 데 사용