# 251124 TIL

## Fan Out On Write(Push Model)
- 글을 쓰는 시점(Write)에, 내 팔로워들의 피드 목록에 글을 미리 배달(Push)해 놓는 방식
- Timeline 테이블을 만들어, 조회 시간을 줄여 시간복잡도에서 이득을 가져 가는 것

## Fan Out On Write (Push Model)
- 팔로워가 피드를 보러 올 때(Read) 데이터를 보여주는 방식

| 특징 | Pull Model (Fan Out On Read) | Push Model (Fan Out On Write) |
| :--- | :--- | :--- |
| **쓰기 속도** | **매우 빠름**<br>(본인 DB에만 저장) | **느림**<br>(팔로워 수만큼 복사해야 함) |
| **읽기 속도** | **느림**<br>(조회할 때마다 계산/DB부하) | **매우 빠름**<br>(만들어진 거 가져오기만 함) |
| **저장소 비용** | **저렴**<br>(데이터 중복 없음) | **비쌈**<br>(Redis 메모리 낭비 심함) |
| **적합한 대상** | **인플루언서(연예인)** | **일반 유저** |

## Redis pub-sub(Redis Publish/Subscribe)
- 실시간 메시지 방송 시스템
- 보내는 사람(Publisher)이 특정 채널에 메시지를 던지면, 그 채널을 듣고 있던(Subscribe) 모든 사람에게 동시에 메시지가 전달
- 저장되지 않고 날아간다(Fire and Forget)
- 서버 간의 실시간 동기화를 위해 사용됨
- 채팅, 알림에 사용

| 특징 | Redis Pub/Sub | Kafka |
| :--- | :--- | :--- |
| **메시지 보관** | **X<br>(휘발성)** | **O<br>(디스크 저장)** |
| **수신 확인** | 구독자가 오프라인이면 메시지 유실됨 | 구독자가 나중에 다시 들어와서 읽을 수 있음 |
| **속도** | **초고속**<br>(메모리상에서 바로 쏨) | 빠르지만 Redis보단 무거움 |
| **용도** | 실시간 알림, 채팅, 일회성 이벤트 | 데이터 동기화, 로그 수집, 결제 내역 |

## SSE(Server-Sent Events)
- 서버가 클라이언트(브라우저)에게 단방향으로 실시간 데이터를 계속 보내주는 웹 표준 스트리밍 기술
- 서버에서 클라이언트로만(One-Way) 데이터가 흐른다

| 특징 | SSE (Server-Sent Events) | WebSocket |
| :--- | :--- | :--- |
| **통신 방향** | **단방향**<br>(Server -> Client) | **양방향**<br>(Server <-> Client) |
| **프로토콜** | HTTP<br>(text/event-stream) | WS / WSS<br>(TCP 기반 자체 프로토콜) |
| **재연결** | **자동 지원**<br>(브라우저 내장) | 수동 구현 필요<br>(라이브러리 의존) |
| **데이터 형태** | 텍스트 (UTF-8) 위주 | 텍스트 및 바이너리 데이터 |
| **SNS 용도** | **실시간 알림, 뉴스 피드, 주식 시세** | **실시간 채팅, 멀티플레이 게임** |